import{d as N,r as b,a as O,c as C,e,w as s,f as n,b as r,F as S,n as j,j as u,t as m,E as _,K,o as T,m as L,g as q,M as H}from"./index-DWC9IZjL.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"data-container"},R={class:"data-section"},W={class:"storage-info"},X={class:"storage-details"},Y={class:"storage-stats"},Z={class:"data-section"},ee={class:"table-header"},te={class:"dialog-footer"},ae=N({__name:"index",setup(se){const V=b("storage"),x=b([{name:"兴隆庄主存储",used:"30.2TB",total:"50TB",usagePercentage:60},{name:"社区人口数据存储",used:"15.8TB",total:"20TB",usagePercentage:79},{name:"政务业务数据库",used:"9.3TB",total:"10TB",usagePercentage:93},{name:"视频监控归档",used:"7.1TB",total:"8TB",usagePercentage:89},{name:"历史档案存储",used:"40.5TB",total:"50TB",usagePercentage:81},{name:"门户网站存储",used:"2.3TB",total:"5TB",usagePercentage:46},{name:"OA系统存储",used:"3.1TB",total:"5TB",usagePercentage:62}]),i=b([{id:1,name:"人口信息同步服务",source:"/data/population",destination:"/backup/population",size:"1.5TB",status:"进行中",progress:52},{id:2,name:"社区业务数据备份",source:"/data/business",destination:"/backup/business",size:"900GB",status:"已完成",progress:100},{id:3,name:"视频监控数据归档",source:"/data/video",destination:"/archive/video",size:"3.2TB",status:"暂停中",progress:0},{id:4,name:"用户信息迁移",source:"/data/user_old",destination:"/data/user_new",size:"600GB",status:"进行中",progress:68},{id:5,name:"日志文件同步",source:"/data/logs",destination:"/backup/logs",size:"200GB",status:"已完成",progress:100},{id:6,name:"OA系统数据备份",source:"/data/oa",destination:"/backup/oa",size:"350GB",status:"进行中",progress:33},{id:7,name:"门户网站镜像",source:"/data/portal",destination:"/mirror/portal",size:"250GB",status:"暂停中",progress:0}]),w=o=>o<70?"#67C23A":o<90?"#E6A23C":"#F56C6C",P=o=>{switch(o){case"已完成":return"success";case"暂停中":return"primary";case"进行中":return"info";case"失败":return"danger";default:return"info"}},p=b(!1),l=O({name:"",source:"",destination:"",size:""}),$=()=>{const o=i.value.length+1;i.value.push({id:o,name:l.name,source:l.source,destination:l.destination,size:l.size,status:"暂停中",progress:0}),_.success("已添加传输任务"),p.value=!1,l.name="",l.source="",l.destination="",l.size=""},h=o=>{if(o.status==="暂停中"){if(o.status="进行中",_.info(`继续任务: ${o.name}`),o.progress<100){const t=setInterval(()=>{o.progress+=1,o.progress>=100&&(o.progress=100,o.status="已完成",clearInterval(t))},2e3)}}else o.status="暂停中",_.success(`已暂停任务: ${o.name}`)},D=o=>{K.confirm(`确认删除任务"${o.name}"吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const t=i.value.findIndex(v=>v.id===o.id);t!==-1&&(i.value.splice(t,1),_.success("删除成功"))}).catch(()=>{_.info("已取消删除")})};return(o,t)=>{const v=n("el-icon"),z=n("el-progress"),k=n("el-card"),G=n("el-col"),U=n("el-row"),y=n("el-tab-pane"),c=n("el-button"),d=n("el-table-column"),A=n("el-tag"),E=n("el-table"),I=n("el-tabs"),f=n("el-input"),g=n("el-form-item"),F=n("el-form"),M=n("el-dialog");return T(),C("div",Q,[e(k,{class:"data-card"},{header:s(()=>t[8]||(t[8]=[r("div",{class:"card-header"},[r("h2",null,"数据管理")],-1)])),default:s(()=>[e(I,{modelValue:V.value,"onUpdate:modelValue":t[1]||(t[1]=a=>V.value=a)},{default:s(()=>[e(y,{label:"存储数据",name:"storage"},{default:s(()=>[r("div",R,[e(U,{gutter:20},{default:s(()=>[(T(!0),C(S,null,j(x.value,(a,B)=>(T(),L(G,{span:8,key:B},{default:s(()=>[e(k,{class:"storage-card"},{default:s(()=>[r("div",W,[e(v,{size:40,class:"storage-icon"},{default:s(()=>[e(q(H))]),_:1}),r("div",X,[r("h3",null,m(a.name),1),r("div",Y,[e(z,{percentage:a.usagePercentage,color:w(a.usagePercentage)},null,8,["percentage","color"]),r("span",null,"已用空间: "+m(a.used)+" / "+m(a.total),1)])])])]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(y,{label:"数据传输",name:"transfer"},{default:s(()=>[r("div",Z,[r("div",ee,[e(c,{type:"primary",onClick:t[0]||(t[0]=a=>p.value=!0)},{default:s(()=>t[9]||(t[9]=[u(" 添加数据传输任务 ")])),_:1,__:[9]})]),e(E,{data:i.value,style:{width:"100%"}},{default:s(()=>[e(d,{prop:"id",label:"ID",width:"80"}),e(d,{prop:"name",label:"任务名称"}),e(d,{prop:"source",label:"源位置"}),e(d,{prop:"destination",label:"目标位置"}),e(d,{prop:"size",label:"数据大小"}),e(d,{prop:"status",label:"状态"},{default:s(a=>[e(A,{type:P(a.row.status)},{default:s(()=>[u(m(a.row.status),1)]),_:2},1032,["type"])]),_:1}),e(d,{prop:"progress",label:"进度"},{default:s(a=>[e(z,{percentage:a.row.progress},null,8,["percentage"])]),_:1}),e(d,{label:"操作"},{default:s(a=>[e(c,{size:"small",type:"primary",disabled:a.row.status==="已完成",onClick:B=>h(a.row)},{default:s(()=>[u(m(a.row.status==="暂停中"?"继续":"暂停"),1)]),_:2},1032,["disabled","onClick"]),e(c,{size:"small",type:"danger",onClick:B=>D(a.row)},{default:s(()=>t[10]||(t[10]=[u("删除")])),_:2,__:[10]},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(M,{modelValue:p.value,"onUpdate:modelValue":t[7]||(t[7]=a=>p.value=a),title:"添加数据传输任务",width:"500px"},{footer:s(()=>[r("span",te,[e(c,{onClick:t[6]||(t[6]=a=>p.value=!1)},{default:s(()=>t[11]||(t[11]=[u("取消")])),_:1,__:[11]}),e(c,{type:"primary",onClick:$},{default:s(()=>t[12]||(t[12]=[u("确定")])),_:1,__:[12]})])]),default:s(()=>[e(F,{ref:"transferForm",model:l,"label-width":"120px"},{default:s(()=>[e(g,{label:"任务名称",prop:"name"},{default:s(()=>[e(f,{modelValue:l.name,"onUpdate:modelValue":t[2]||(t[2]=a=>l.name=a),placeholder:"请输入任务名称"},null,8,["modelValue"])]),_:1}),e(g,{label:"源位置",prop:"source"},{default:s(()=>[e(f,{modelValue:l.source,"onUpdate:modelValue":t[3]||(t[3]=a=>l.source=a),placeholder:"请输入源位置"},null,8,["modelValue"])]),_:1}),e(g,{label:"目标位置",prop:"destination"},{default:s(()=>[e(f,{modelValue:l.destination,"onUpdate:modelValue":t[4]||(t[4]=a=>l.destination=a),placeholder:"请输入目标位置"},null,8,["modelValue"])]),_:1}),e(g,{label:"数据大小",prop:"size"},{default:s(()=>[e(f,{modelValue:l.size,"onUpdate:modelValue":t[5]||(t[5]=a=>l.size=a),placeholder:"例如: 500GB"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),ne=J(ae,[["__scopeId","data-v-653dfe43"]]);export{ne as default};
