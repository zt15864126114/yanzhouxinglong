import{d as ne,r as p,a as se,D as oe,c as ie,e as t,w as l,f as d,x as P,L as ue,m as w,j as o,t as b,b as r,g as M,I as O,H as de,K as q,E as A,o as x}from"./index-VJYCWO8Z.js";import{i as G}from"./index-BjzP5g9D.js";import{_ as pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const re={class:"device-container"},me={class:"card-header"},ce={class:"card-header"},fe={class:"card-header"},_e={class:"dialog-footer"},ye={class:"monitor-container"},ve={class:"monitor-header"},ke={class:"monitor-charts"},Ce=ne({__name:"index",setup(ge){const F=p("network"),T=p(!1),k=p([{id:1,name:"兴隆庄核心交换机",ip:"10.10.1.10",type:"switch",status:"online",lastCheck:"2025-05-02 09:12:00"},{id:2,name:"社区办公交换机",ip:"10.10.1.11",type:"switch",status:"online",lastCheck:"2025-05-03 10:23:00"},{id:3,name:"外网路由器",ip:"10.10.2.1",type:"router",status:"online",lastCheck:"2025-05-05 08:45:00"},{id:4,name:"安全防火墙",ip:"10.10.3.1",type:"firewall",status:"online",lastCheck:"2025-05-07 11:30:00"},{id:5,name:"负载均衡器",ip:"10.10.4.1",type:"loadbalancer",status:"maintenance",lastCheck:"2025-05-09 14:10:00"},{id:6,name:"一楼接入交换机",ip:"10.10.5.10",type:"switch",status:"online",lastCheck:"2025-05-10 09:55:00"},{id:7,name:"二楼接入交换机",ip:"10.10.5.11",type:"switch",status:"offline",lastCheck:"2025-05-12 13:20:00"},{id:8,name:"无线控制器",ip:"10.10.6.1",type:"controller",status:"online",lastCheck:"2025-05-13 15:40:00"},{id:9,name:"核心路由器",ip:"10.10.2.2",type:"router",status:"online",lastCheck:"2025-05-15 10:05:00"},{id:10,name:"外部防火墙",ip:"10.10.3.2",type:"firewall",status:"offline",lastCheck:"2025-05-18 16:30:00"}]),y=p([{id:1,name:"社区办公服务器",ip:"10.20.1.10",cpu:38,memory:55,status:"running",lastCheck:"2025-05-02 09:12:00"},{id:2,name:"人口管理服务器",ip:"10.20.1.11",cpu:52,memory:68,status:"running",lastCheck:"2025-05-03 10:23:00"},{id:3,name:"数据库服务器",ip:"10.20.2.10",cpu:75,memory:85,status:"running",lastCheck:"2025-05-05 08:45:00"},{id:4,name:"视频监控服务器",ip:"10.20.2.12",cpu:68,memory:78,status:"stopped",lastCheck:"2025-05-07 11:30:00"},{id:5,name:"备份服务器",ip:"10.20.3.10",cpu:35,memory:45,status:"running",lastCheck:"2025-05-09 14:10:00"},{id:6,name:"虚拟化服务器A",ip:"10.20.4.10",cpu:55,memory:70,status:"running",lastCheck:"2025-05-10 09:55:00"},{id:7,name:"虚拟化服务器B",ip:"10.20.4.11",cpu:62,memory:80,status:"running",lastCheck:"2025-05-12 13:20:00"},{id:8,name:"政务门户服务器",ip:"10.20.6.10",cpu:48,memory:55,status:"running",lastCheck:"2025-05-13 15:40:00"},{id:9,name:"OA系统服务器",ip:"10.20.7.10",cpu:41,memory:60,status:"running",lastCheck:"2025-05-15 10:05:00"},{id:10,name:"应急指挥服务器",ip:"10.20.8.10",cpu:58,memory:72,status:"stopped",lastCheck:"2025-05-18 16:30:00"}]),v=p([{id:1,name:"主存储A",type:"SAN",capacity:"50TB",used:65,status:"normal",lastCheck:"2025-05-02 09:12:00"},{id:2,name:"主存储B",type:"SAN",capacity:"50TB",used:58,status:"normal",lastCheck:"2025-05-03 10:23:00"},{id:3,name:"备份存储A",type:"NAS",capacity:"30TB",used:45,status:"normal",lastCheck:"2025-05-05 08:45:00"},{id:4,name:"备份存储B",type:"NAS",capacity:"30TB",used:42,status:"abnormal",lastCheck:"2025-05-07 11:30:00"},{id:5,name:"归档存储",type:"NAS",capacity:"100TB",used:35,status:"normal",lastCheck:"2025-05-09 14:10:00"},{id:6,name:"分布式存储A",type:"分布式",capacity:"50TB",used:22,status:"normal",lastCheck:"2025-05-10 09:55:00"},{id:7,name:"分布式存储B",type:"分布式",capacity:"50TB",used:18,status:"abnormal",lastCheck:"2025-05-12 13:20:00"}]),_=p(!1),J=p(),s=se({name:"",ip:"",type:"",os:"",description:""}),$=p(!1),h=p({}),j=p(),H=p(),m=p("network"),C=p(null),Q=()=>{_.value=!0,s.name="",s.ip="",s.type="switch",m.value="network",C.value=null},W=()=>{_.value=!0,s.name="",s.ip="",s.type="server",m.value="server",C.value=null},X=()=>{_.value=!0,s.name="",s.ip="",s.type="storage",m.value="storage",C.value=null},z=n=>{_.value=!0,Object.assign(s,n),y.value.some(e=>e.id===n.id)?m.value="server":v.value.some(e=>e.id===n.id)?m.value="storage":m.value="network",C.value=n.id},D=n=>{$.value=!0,h.value=n,setTimeout(()=>{ee()},100)},Y=n=>{q.confirm(`确认重启设备"${n.name}"吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{A.success(`设备"${n.name}"重启命令已发送`)})},S=n=>{q.confirm(`确认删除设备"${n.name}"吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{if(k.value.some(e=>e.id===n.id)){const e=k.value.findIndex(c=>c.id===n.id);e!==-1&&k.value.splice(e,1)}else if(y.value.some(e=>e.id===n.id)){const e=y.value.findIndex(c=>c.id===n.id);e!==-1&&y.value.splice(e,1)}else if(v.value.some(e=>e.id===n.id)){const e=v.value.findIndex(c=>c.id===n.id);e!==-1&&v.value.splice(e,1)}A.success(`设备"${n.name}"已删除`)})},Z=()=>{if(C.value){let n=m.value==="network"?k.value:m.value==="server"?y.value:v.value;const e=n.findIndex(c=>c.id===C.value);e!==-1&&(n[e]={...n[e],...s}),A.success("配置已保存")}else{const n=Date.now();m.value==="network"?k.value.unshift({id:n,name:s.name,ip:s.ip,type:s.type,status:"online",lastCheck:new Date().toLocaleString()}):m.value==="server"?y.value.unshift({id:n,name:s.name,ip:s.ip,cpu:0,memory:0,status:"running",lastCheck:new Date().toLocaleString()}):m.value==="storage"&&v.value.unshift({id:n,name:s.name,type:s.type,capacity:"10TB",used:0,status:"normal",lastCheck:new Date().toLocaleString()}),A.success("添加成功")}_.value=!1},ee=()=>{const n=G(j.value);n.setOption({title:{text:"CPU使用率"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:["00:00","03:00","06:00","09:00","12:00","15:00","18:00","21:00"]},yAxis:{type:"value",max:100},series:[{data:[30,40,35,50,45,60,55,45],type:"line",smooth:!0}]});const e=G(H.value);e.setOption({title:{text:"内存使用率"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:["00:00","03:00","06:00","09:00","12:00","15:00","18:00","21:00"]},yAxis:{type:"value",max:100},series:[{data:[50,55,60,65,70,65,60,55],type:"line",smooth:!0}]}),window.addEventListener("resize",()=>{n.resize(),e.resize()})};return oe(()=>{}),(n,e)=>{const c=d("el-icon"),u=d("el-button"),i=d("el-table-column"),V=d("el-tag"),I=d("el-table"),N=d("el-card"),U=d("el-tab-pane"),L=d("el-progress"),te=d("el-tabs"),B=d("el-input"),g=d("el-form-item"),R=d("el-option"),le=d("el-select"),ae=d("el-form"),K=d("el-dialog"),E=ue("loading");return x(),ie("div",re,[t(te,{modelValue:F.value,"onUpdate:modelValue":e[0]||(e[0]=a=>F.value=a)},{default:l(()=>[t(U,{label:"网络设备",name:"network"},{default:l(()=>[t(N,null,{header:l(()=>[r("div",me,[e[10]||(e[10]=r("span",null,"网络设备列表",-1)),t(u,{type:"primary",onClick:Q},{default:l(()=>[t(c,null,{default:l(()=>[t(M(O))]),_:1}),e[9]||(e[9]=o("添加设备 "))]),_:1,__:[9]})])]),default:l(()=>[P((x(),w(I,{data:k.value,style:{width:"100%"}},{default:l(()=>[t(i,{prop:"name",label:"设备名称"}),t(i,{prop:"ip",label:"IP地址"}),t(i,{prop:"type",label:"设备类型"}),t(i,{prop:"status",label:"状态"},{default:l(({row:a})=>[t(V,{type:a.status==="online"?"success":"danger"},{default:l(()=>[o(b(a.status==="online"?"在线":"离线"),1)]),_:2},1032,["type"])]),_:1}),t(i,{prop:"lastCheck",label:"最后检查时间"}),t(i,{label:"操作",width:"250"},{default:l(({row:a})=>[t(u,{type:"primary",size:"small",onClick:f=>z(a)},{default:l(()=>e[11]||(e[11]=[o("配置")])),_:2,__:[11]},1032,["onClick"]),t(u,{type:"success",size:"small",onClick:f=>D(a)},{default:l(()=>e[12]||(e[12]=[o("监控")])),_:2,__:[12]},1032,["onClick"]),t(u,{type:"danger",size:"small",onClick:f=>S(a)},{default:l(()=>e[13]||(e[13]=[o("删除")])),_:2,__:[13]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[E,T.value]])]),_:1})]),_:1}),t(U,{label:"服务器设备",name:"server"},{default:l(()=>[t(N,null,{header:l(()=>[r("div",ce,[e[15]||(e[15]=r("span",null,"服务器设备列表",-1)),t(u,{type:"primary",onClick:W},{default:l(()=>[t(c,null,{default:l(()=>[t(M(O))]),_:1}),e[14]||(e[14]=o("添加服务器 "))]),_:1,__:[14]})])]),default:l(()=>[P((x(),w(I,{data:y.value,style:{width:"100%"}},{default:l(()=>[t(i,{prop:"name",label:"服务器名称"}),t(i,{prop:"ip",label:"IP地址"}),t(i,{prop:"cpu",label:"CPU使用率"},{default:l(({row:a})=>[t(L,{percentage:a.cpu,status:a.cpu>80?"exception":""},null,8,["percentage","status"])]),_:1}),t(i,{prop:"memory",label:"内存使用率"},{default:l(({row:a})=>[t(L,{percentage:a.memory,status:a.memory>80?"exception":""},null,8,["percentage","status"])]),_:1}),t(i,{prop:"status",label:"状态"},{default:l(({row:a})=>[t(V,{type:a.status==="running"?"success":"danger"},{default:l(()=>[o(b(a.status==="running"?"运行中":"已停止"),1)]),_:2},1032,["type"])]),_:1}),t(i,{label:"操作",width:"300"},{default:l(({row:a})=>[t(u,{type:"primary",size:"small",onClick:f=>z(a)},{default:l(()=>e[16]||(e[16]=[o("配置")])),_:2,__:[16]},1032,["onClick"]),t(u,{type:"success",size:"small",onClick:f=>D(a)},{default:l(()=>e[17]||(e[17]=[o("监控")])),_:2,__:[17]},1032,["onClick"]),t(u,{type:"warning",size:"small",onClick:f=>Y(a)},{default:l(()=>e[18]||(e[18]=[o("重启")])),_:2,__:[18]},1032,["onClick"]),t(u,{type:"danger",size:"small",onClick:f=>S(a)},{default:l(()=>e[19]||(e[19]=[o("删除")])),_:2,__:[19]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[E,T.value]])]),_:1})]),_:1}),t(U,{label:"存储设备",name:"storage"},{default:l(()=>[t(N,null,{header:l(()=>[r("div",fe,[e[21]||(e[21]=r("span",null,"存储设备列表",-1)),t(u,{type:"primary",onClick:X},{default:l(()=>[t(c,null,{default:l(()=>[t(M(O))]),_:1}),e[20]||(e[20]=o("添加存储 "))]),_:1,__:[20]})])]),default:l(()=>[P((x(),w(I,{data:v.value,style:{width:"100%"}},{default:l(()=>[t(i,{prop:"name",label:"存储名称"}),t(i,{prop:"type",label:"存储类型"}),t(i,{prop:"capacity",label:"总容量"}),t(i,{prop:"used",label:"已用容量"},{default:l(({row:a})=>[t(L,{percentage:a.used,status:a.used>80?"exception":""},null,8,["percentage","status"])]),_:1}),t(i,{prop:"status",label:"状态"},{default:l(({row:a})=>[t(V,{type:a.status==="normal"?"success":"danger"},{default:l(()=>[o(b(a.status==="normal"?"正常":"异常"),1)]),_:2},1032,["type"])]),_:1}),t(i,{label:"操作",width:"250"},{default:l(({row:a})=>[t(u,{type:"primary",size:"small",onClick:f=>z(a)},{default:l(()=>e[22]||(e[22]=[o("配置")])),_:2,__:[22]},1032,["onClick"]),t(u,{type:"success",size:"small",onClick:f=>D(a)},{default:l(()=>e[23]||(e[23]=[o("监控")])),_:2,__:[23]},1032,["onClick"]),t(u,{type:"danger",size:"small",onClick:f=>S(a)},{default:l(()=>e[24]||(e[24]=[o("删除")])),_:2,__:[24]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[E,T.value]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(K,{modelValue:_.value,"onUpdate:modelValue":e[7]||(e[7]=a=>_.value=a),title:"设备配置",width:"600px"},{footer:l(()=>[r("span",_e,[t(u,{onClick:e[6]||(e[6]=a=>_.value=!1)},{default:l(()=>e[25]||(e[25]=[o("取消")])),_:1,__:[25]}),t(u,{type:"primary",onClick:Z},{default:l(()=>e[26]||(e[26]=[o("确定")])),_:1,__:[26]})])]),default:l(()=>[t(ae,{ref_key:"configFormRef",ref:J,model:s,"label-width":"100px"},{default:l(()=>[t(g,{label:"设备名称"},{default:l(()=>[t(B,{modelValue:s.name,"onUpdate:modelValue":e[1]||(e[1]=a=>s.name=a)},null,8,["modelValue"])]),_:1}),t(g,{label:"IP地址"},{default:l(()=>[t(B,{modelValue:s.ip,"onUpdate:modelValue":e[2]||(e[2]=a=>s.ip=a)},null,8,["modelValue"])]),_:1}),t(g,{label:"设备类型"},{default:l(()=>[t(le,{modelValue:s.type,"onUpdate:modelValue":e[3]||(e[3]=a=>s.type=a),placeholder:"请选择设备类型"},{default:l(()=>[t(R,{label:"交换机",value:"switch"}),t(R,{label:"路由器",value:"router"}),t(R,{label:"防火墙",value:"firewall"})]),_:1},8,["modelValue"])]),_:1}),m.value==="server"?(x(),w(g,{key:0,label:"操作系统"},{default:l(()=>[t(B,{modelValue:s.os,"onUpdate:modelValue":e[4]||(e[4]=a=>s.os=a)},null,8,["modelValue"])]),_:1})):de("",!0),t(g,{label:"描述"},{default:l(()=>[t(B,{modelValue:s.description,"onUpdate:modelValue":e[5]||(e[5]=a=>s.description=a),type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(K,{modelValue:$.value,"onUpdate:modelValue":e[8]||(e[8]=a=>$.value=a),title:"设备监控",width:"800px"},{default:l(()=>[r("div",ye,[r("div",ve,[r("h3",null,b(h.value.name),1),t(V,{type:h.value.status==="online"?"success":"danger"},{default:l(()=>[o(b(h.value.status==="online"?"在线":"离线"),1)]),_:1},8,["type"])]),r("div",ke,[r("div",{ref_key:"cpuChartRef",ref:j,class:"chart"},null,512),r("div",{ref_key:"memoryChartRef",ref:H,class:"chart"},null,512)])])]),_:1},8,["modelValue"])])}}}),Ve=pe(Ce,[["__scopeId","data-v-d415af4c"]]);export{Ve as default};
